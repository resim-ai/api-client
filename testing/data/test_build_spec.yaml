name: data
services:
  webapp:
    extends:
      file: ./test_build_spec.base.yaml
      service: webapp
    environment:
      - DEBUG=true  # This will merge with base environment
    volumes:
      - webdata:/usr/share/nginx/html  # Overrides (replaces) the volume mapping from base
    networks:
      - frontend
      - backend  # Extends the network list to add an additional network

  worker:
    extends:
      file: ./test_build_spec.base.yaml
      service: worker
    command: ["sh", "-c", "echo Overridden Worker command"]  # This replaces base command entirely
    networks:
      - backend

networks:
  frontend:
    driver: bridge
  backend:
    driver: bridge

volumes:
  webdata: